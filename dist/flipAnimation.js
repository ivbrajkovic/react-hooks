"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=require("react"),invertDefault=function(e){var t=e.delta,r=e.elem;r.style.transform="translate("+t.left+"px, "+t.top+"px)",r.style.transition="transform 0s"},playDefault=function(e){var t=e.elem;t.style.transform="",t.style.transition="transform 300ms ease"},getDelta=function(e,t){return{top:e.top-t.top,left:e.left-t.left,width:e.width/t.width,height:e.height/t.height}},isZero=function(e){return 0===e.left&&0===e.top&&1===e.width&&1===e.height},useFlipAnimation=function(e){var t=e.root,r=e.invert,n=void 0===r?invertDefault:r,i=e.play,a=void 0===i?playDefault:i,o=e.invertAndPlay,l=react_1.useRef({}),u=react_1.useRef(!0);react_1.useLayoutEffect((function(){if(t.current){for(var e=t.current.children,r=function(t){var r=e[t],i=r.dataset.key||0,s=r.getBoundingClientRect();if(!u.current&&i in l.current){var f=l.current[i],c=getDelta(f,s);isZero(c)||(o?o({delta:c,elem:r,previous:f,next:s}):(n({delta:c,elem:r,previous:f,next:s}),requestAnimationFrame((function(){a({delta:c,elem:r,previous:f,next:s})}))))}l.current[r.dataset.key]=s},i=0;i<e.length;i++)r(i);u.current=!1}}),[t,n,a,o])};exports.default=useFlipAnimation;